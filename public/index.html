<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Todo</title>
  </head>
  <body>

    <script type="text/x-handlebars">
      <div>
        {{#linkTo 'todos'}}todos{{/linkTo}}
        {{#linkTo 'register'}}register{{/linkTo}}
        {{#linkTo 'login'}}login{{/linkTo}}
      </div>
      <br>
      {{outlet}}
    </script>

    <script type="text/x-handlebars" data-template-name='register'>
      {{input value=username type="text" placeholder="Username"}}
      {{input value=password placeholder="Password"}}
      <button {{action "register"}}>Register</button>
      {{#if errorMessage}}
        <div>{{errorMessage}}</div>
      {{/if}}

    </script>

    <script type="text/x-handlebars" data-template-name='index'>
      Welcome to the todo system.
    </script>


     <script type="text/x-handlebars" data-template-name="login">
        {{#if token}}
          <p>You are already logged in!</p>
        {{else}}
          {{input value=username type="text" placeholder="Username"}}
          {{input value=password placeholder="Password"}}
          <button {{action "login"}}>Login</button>
          {{#if errorMessage}}
            <div>{{errorMessage}}</div>
          {{/if}}
        {{/if}}
      </script>

    <script type="text/x-handlebars" data-template-name='todo/_edit'>
      {{input type='number' class="input" placeholder="Priority" value=priority}}
      {{input class="input" placeholder="What needs to be done?" value=title}}
      {{input type='date' class="input" placeholder="Due date" value=due_date}}
    </script>

    <script type="text/x-handlebars" data-template-name="todos">
      <section id="todoapp">
        <header id="header">
          {{partial 'todo/edit'}}
          <span class='errors'>{{errors}}</span>
          <button {{action "createTodo"}}>Save</button>
        </header>

          <section id="main">
            <ul id="todo-list" class="sortable">
              {{#each controller itemController='todo'}}
                <li {{bindAttr class="isEditing:editing"}} data-id="{{unbound id}}">
                  {{#if isEditing}}
                    {{partial 'todo/edit'}}
                    <button {{action "saveTodo"}} class="save-button">Save</button>
                  {{else}}
                    <label>{{priority}}</label>
                    <label>{{title}}</label>
                    <label>{{date due_date}}</label>
                    <button {{action "editTodo"}} class="edit-button">Edit</button>
                    <button {{action "removeTodo"}} class="destroy">Delete</button>
                  {{/if}}
                </li>
              {{/each}}
            </ul>
          </section>
      </section>
    </script>

    <script src="js/libs/jquery.js"></script>
    <script src="js/libs/jquery-ui.js"></script>
    <script src="js/libs/handlebars.js"></script>
    <script src="js/libs/ember.js"></script>
    <script src="js/libs/ember-data.js"></script>
    <script src="js/libs/moment.js"></script>

    <script src="js/application.js"></script>
    <script src="js/router.js"></script>

    <script src="js/models/store.js"></script>
    <script src="js/models/todo.js"></script>
    <script src="js/controllers/todos_controller.js"></script>
    <script src="js/controllers/todo_controller.js"></script>
    <script src="js/controllers/register_controller.js"></script>
    <script src="js/controllers/login_controller.js"></script>
    <script src="js/views/drag_todo_view.js"></script>
    <script src="js/views/edit_todo_view.js"></script>
  </body>
</html>